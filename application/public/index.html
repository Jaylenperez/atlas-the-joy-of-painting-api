<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Page Title</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<header>
<h1>The Joy Of Painting Episode Search</h1>
<p>This is a paragraph.</p>
</header>
<main>
    <section id="filters">
        <form id="filterForm">
          <!-- Year Filter -->
          <div class="filter-group">
            <label for="yearFilter">Year:</label>
            <select id="yearFilter" name="year">
              <option value="">Select Year</option>
            </select>
          </div>
          <!-- Month Filter -->
          <div class="filter-group">
            <label for="monthFilter">Month:</label>
            <select id="monthFilter" name="month">
              <option value="">Select Month</option>
            </select>
          </div>
          <!-- Season Filter -->
          <div class="filter-group">
            <label for="seasonFilter">Season:</label>
            <select id="seasonFilter" name="season">
              <option value="">Select Season</option>
            </select>
          </div>
          <div>
            <h4>Subjects</h4>
                <form id="checkboxForm">
                <!-- Checkbox Option 1 -->
                <div class="checkbox-option">
                    <input type="checkbox" id="option1" name="filterOptions" value="option1">
                    <label for="option1">Option 1</label>
                </div>
                <!-- Checkbox Option 2 -->
                <div class="checkbox-option">
                    <input type="checkbox" id="option2" name="filterOptions" value="option2">
                    <label for="option2">Option 2</label>
                </div>
                <!-- Checkbox Option 3 -->
                <div class="checkbox-option">
                    <input type="checkbox" id="option3" name="filterOptions" value="option3">
                    <label for="option3">Option 3</label>
                </div>
                <!-- Checkbox Option 4 -->
                <div class="checkbox-option">
                    <input type="checkbox" id="option4" name="filterOptions" value="option4">
                    <label for="option4">Option 4</label>
                </div>
                </form>
            </div>
            <div>
                <h4>Colors</h4>
                <form id="checkboxForm">
                <!-- Checkbox Option 1 -->
                <div class="checkbox-option">
                    <input type="checkbox" id="option1" name="filterOptions" value="option1">
                    <label for="option1">Option 1</label>
                </div>
                <!-- Checkbox Option 2 -->
                <div class="checkbox-option">
                    <input type="checkbox" id="option2" name="filterOptions" value="option2">
                    <label for="option2">Option 2</label>
                </div>
                <!-- Checkbox Option 3 -->
                <div class="checkbox-option">
                    <input type="checkbox" id="option3" name="filterOptions" value="option3">
                    <label for="option3">Option 3</label>
                </div>
                <!-- Checkbox Option 4 -->
                <div class="checkbox-option">
                    <input type="checkbox" id="option4" name="filterOptions" value="option4">
                    <label for="option4">Option 4</label>
                </div>
                </form>
            </div>
            <div>
                <button>Search</button>
            </div>
      </section>
</main>

<script>
  // Wait for the DOM content to load
  document.addEventListener("DOMContentLoaded", async () => {
    try {
      // Make a GET request to your endpoint
      const response = await fetch('/api/episodes/years');
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      // Parse the response as JSON
      const result = await response.json();
      const years = result.data; // Expecting data as an array of objects, e.g., [{ "year": 1983 }, { "year": 1984 }, ...]
      const yearFilter = document.getElementById("yearFilter");

      // Loop through the years and create option elements
      years.forEach(item => {
        const option = document.createElement("option");
        option.value = item.year;
        option.textContent = item.year;
        yearFilter.appendChild(option);
      });
    } catch (error) {
      console.error("Error fetching years:", error);
    }

    // Fetch and populate months
    try {
      const responseMonths = await fetch('/api/episodes/months');
      if (!responseMonths.ok) {
        throw new Error('Network response was not ok for months endpoint');
      }
      const resultMonths = await responseMonths.json();
      const months = resultMonths.data;
      const monthFilter = document.getElementById('monthFilter');

      // Create option elements for each month from the endpoint
      months.forEach(item => {
        const option = document.createElement("option");
        option.value = item.month;
        option.textContent = item.month;
        monthFilter.appendChild(option);
      });
    } catch (error) {
      console.error("Error fetching months:", error);
    }

    // fetch and populate seasons 
    try {
    const response = await fetch('/api/colors/seasons');
    if (!response.ok) {
      throw new Error('Network response was not ok for seasons endpoint');
    }
    const result = await response.json();
    const seasons = result.data;
    const seasonFilter = document.getElementById("seasonFilter");
    
    seasons.forEach(item => {
      const option = document.createElement("option");
      option.value = item.season;
      option.textContent = item.season;
      seasonFilter.appendChild(option);
    });
  } catch (error) {
    console.error("Error fetching seasons:", error);
  }
  });
</script>
</body>
</html>